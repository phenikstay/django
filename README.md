# –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω Megano

Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å REST API –∏ –≥–æ—Ç–æ–≤—ã–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üõçÔ∏è –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- üõí –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫
- üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üì¶ –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤
- üí≥ –ò–º–∏—Ç–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Django 5.2.2
- SQLite3 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- Nginx (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
```bash
git clone <repository-url>
cd python_django_diploma
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv\Scripts\activate     # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
```

5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:**
```bash
python manage.py migrate
```

6. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```bash
./restore_fixtures.sh
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (admin/admin) –∏ –∑–∞–≥—Ä—É–∑–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```

8. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```bash
python manage.py runserver 127.0.0.1:8000
```

–°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000

### üë§ –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–∫—Å—Ç—É—Ä –¥–æ—Å—Ç—É–ø–Ω—ã:
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:** admin / admin
- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏:** user1@example.com, user2@example.com –∏ —Ç.–¥. / password123

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone <repository-url>
cd python_django_diploma

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```
SECRET_KEY=your-strong-secret-key-for-production
DEBUG=False
ALLOWED_HOSTS=your-domain.com,www.your-domain.com,127.0.0.1
```

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py migrate

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∏–∫—Å—Ç—É—Ä (–≤–∫–ª—é—á–∞—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
./restore_fixtures.sh

# –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
python manage.py collectstatic --noinput
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/etc/nginx/sites-available/megano-shop`):

```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;
    
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    client_max_body_size 20M;
    
    # –õ–æ–≥–∏
    access_log /var/log/nginx/megano_shop_access.log;
    error_log /var/log/nginx/megano_shop_error.log;
    
    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    location /static/ {
        alias /path/to/your/project/static_collected/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
    location /media/ {
        alias /path/to/your/project/media/;
        expires 1y;
        add_header Cache-Control "public";
    }
    
    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Django
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
    }
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    location ~ /\.(?!well-known).* {
        deny all;
    }
    
    location ~ \.(txt|md)$ {
        deny all;
    }
}
```

### 5. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
sudo ln -s /etc/nginx/sites-available/megano-shop /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ nginx
sudo systemctl reload nginx
```

### 6. –ó–∞–ø—É—Å–∫ Django —Å Gunicorn

```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Gunicorn
gunicorn --bind 127.0.0.1:8000 --workers 3 mysite.wsgi:application

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
nohup gunicorn --bind 127.0.0.1:8000 --workers 3 mysite.wsgi:application > gunicorn.log 2>&1 &
```

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (systemd)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/megano-shop.service`:

```ini
[Unit]
Description=Megano Shop Django App
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/your/project
Environment=PATH=/path/to/your/project/.venv/bin
ExecStart=/path/to/your/project/.venv/bin/gunicorn --bind 127.0.0.1:8000 --workers 3 mysite.wsgi:application
Restart=always

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–ª—É–∂–±—ã:
```bash
sudo systemctl daemon-reload
sudo systemctl enable megano-shop.service
sudo systemctl start megano-shop.service
sudo systemctl status megano-shop.service
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
python_django_diploma/
‚îú‚îÄ‚îÄ mysite/              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îú‚îÄ‚îÄ users/               # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ catalog/             # –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ basket/              # –ö–æ—Ä–∑–∏–Ω–∞
‚îú‚îÄ‚îÄ orders/              # –ó–∞–∫–∞–∑—ã
‚îú‚îÄ‚îÄ payments/            # –ü–ª–∞—Ç–µ–∂–∏
‚îú‚îÄ‚îÄ media/               # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ static_collected/    # –°–æ–±—Ä–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ fixtures/            # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ logs/                # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ nginx.conf           # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
‚îî‚îÄ‚îÄ manage.py           # Django CLI
```

## API Endpoints

- `/api/categories/` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `/api/catalog/` - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
- `/api/product/{id}/` - –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- `/api/basket/` - –ö–æ—Ä–∑–∏–Ω–∞
- `/api/orders/` - –ó–∞–∫–∞–∑—ã
- `/api/sign-in/` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `/api/sign-up/` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `/api/profile/` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `/admin/`

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∑—ã–≤–æ–≤

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫ –∏ –∞–∫—Ü–∏–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–§–∏–∫—Å—Ç—É—Ä—ã –≤–∫–ª—é—á–∞—é—Ç:
- **30 —Ç–æ–≤–∞—Ä–æ–≤** –≤ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- **9 –∫–∞—Ç–µ–≥–æ—Ä–∏–π** —Ç–æ–≤–∞—Ä–æ–≤  
- **59 –æ—Ç–∑—ã–≤–æ–≤** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **10 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∫–∏–¥–æ–∫**
- **6 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** —Å–æ –≤—Å–µ–º–∏ –ø—Ä–∞–≤–∞–º–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤–∫–ª—é—á–µ–Ω—ã:
- CSRF –∑–∞—â–∏—Ç–∞
- XSS –∑–∞—â–∏—Ç–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç clickjacking
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `logs/django.log` - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ Django
- Console output - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ nginx: `/var/log/nginx/megano_shop_error.log`
2. –õ–æ–≥–∏ Django: `logs/django.log`
3. –°—Ç–∞—Ç—É—Å systemd —Å–ª—É–∂–±—ã: `sudo systemctl status megano-shop.service`

